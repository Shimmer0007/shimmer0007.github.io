<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShimmerOS - Interactive Edition</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        /* --- ä¸»é¢˜ä¸è‰²å½©æ–¹æ¡ˆ --- */
        :root {
            --background-deep-space: #10101c;
            --primary-glow: #00f6ff;
            --secondary-glow: #ff00ff;
            --window-bg: #212130;
            --window-border: #6c52a0;
            --window-title-bg: linear-gradient(90deg, #6236af, #3b236d);
            --text-color-light: #f0f0f0;
            --text-color-dark: #111;
            --font-pixel: 'Press Start 2P', cursive;
            --font-cjk: 'Zpix', 'Press Start 2P', sans-serif;
            --success-green: #3aef64;
            --disabled-gray: #555;
            --shadow-color: rgba(0, 0, 0, 0.5);
        }

        @font-face {
            font-family: 'Zpix';
            src: url('https://cdn.jsdelivr.net/gh/SolidZORO/zpix-pixel-font@master/dist/zpix.woff2') format('woff2');
        }

        /* --- å…¨å±€ä¸èƒŒæ™¯ --- */
        body {
            background-color: var(--background-deep-space);
            color: var(--text-color-light);
            font-family: var(--font-pixel);
            overflow: hidden;
            margin: 0;
            image-rendering: pixelated;
            cursor: default;
            user-select: none;
        }

        /* è¦†ç›–å±‚ï¼šCRTæ‰«æçº¿æ•ˆæœ */
        #crt-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: repeating-linear-gradient(
                transparent 0,
                rgba(0, 0, 0, 0.3) 1px,
                transparent 2px
            );
            pointer-events: none;
            z-index: 9999;
            opacity: 0.7;
        }
        
        /* è¦†ç›–å±‚ï¼šæ˜Ÿç©ºèƒŒæ™¯ */
        @keyframes move-stars {
            from { background-position: 0 0; }
            to { background-position: -10000px 5000px; }
        }
        .stars {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2;
            background-image: 
                radial-gradient(1px 1px at 20px 30px, #eee, rgba(0,0,0,0)),
                radial-gradient(1px 1px at 40px 70px, #fff, rgba(0,0,0,0)),
                radial-gradient(1px 1px at 90px 40px, var(--primary-glow), rgba(0,0,0,0)),
                radial-gradient(2px 2px at 130px 80px, var(--secondary-glow), rgba(0,0,0,0));
            background-repeat: repeat;
            background-size: 250px 250px;
            animation: move-stars 200s linear infinite;
        }

        /* --- å¼€æœºåŠ¨ç”» --- */
        #boot-screen {
            position: fixed; top: 0; left: 0;
            width: 100vw; height: 100vh;
            background: #000;
            z-index: 10000;
            color: var(--success-green);
            font-family: var(--font-pixel);
            padding: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            transition: opacity 1s ease-out;
        }
        #boot-screen.hidden { opacity: 0; pointer-events: none; }
        .boot-text::after {
            content: '_';
            animation: blink 1s step-end infinite;
        }
        @keyframes blink { 50% { opacity: 0; } }

        /* --- æ¡Œé¢å›¾æ ‡ --- */
        #desktop {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 20px;
            padding: 30px;
            height: calc(100vh - 120px);
            align-items: start;
            justify-items: center;
            opacity: 0;
            transition: opacity 0.5s ease-in;
        }
        #desktop.loaded { opacity: 1; }
        .desktop-icon {
            display: flex; flex-direction: column; align-items: center;
            text-align: center; gap: 10px; cursor: pointer;
            padding: 10px; width: 90px;
            transition: transform 0.2s ease, filter 0.2s ease;
        }
        .desktop-icon:hover {
            transform: translateY(-5px);
            filter: drop-shadow(0 0 8px var(--primary-glow));
        }
        .desktop-icon .icon-image { font-size: 48px; }
        .desktop-icon .icon-label {
            font-size: 14px;
            color: var(--text-color-light);
            text-shadow: 1px 1px 3px var(--shadow-color);
            word-break: break-all;
            line-height: 1.3;
        }

        /* --- çª—å£æ ·å¼ --- */
        .window {
            display: none; position: absolute;
            background-color: var(--window-bg);
            border: 2px solid var(--window-border);
            box-shadow: 
                0 0 20px rgba(0,0,0,0.5),
                inset 2px 2px 0px rgba(255,255,255,0.2),
                inset -2px -2px 0px rgba(0,0,0,0.2);
            min-width: 320px; min-height: 200px;
            resize: both; overflow: hidden;
            flex-direction: column;
            border-radius: 8px;
            animation: open-window 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes open-window {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        .window.active { z-index: 100; filter: drop-shadow(0 0 15px var(--secondary-glow)); }
        
        .title-bar {
            background: var(--window-title-bg);
            color: var(--text-color-light);
            padding: 8px 12px;
            font-size: 14px;
            display: flex; justify-content: space-between; align-items: center;
            cursor: move;
            border-bottom: 2px solid var(--window-border);
            text-shadow: 1px 1px 2px var(--shadow-color);
        }
        
        .title-bar-controls { display: flex; gap: 8px; }
        .control-button {
            width: 18px; height: 18px;
            background-color: var(--window-bg);
            border: 1px solid var(--window-border);
            color: var(--primary-glow);
            font-size: 12px; font-weight: bold;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.2s;
        }
        .control-button:hover { background-color: var(--secondary-glow); color: #fff; }

        .window-body {
            padding: 15px; flex-grow: 1;
            color: var(--text-color-light);
            background-color: rgba(16, 16, 28, 0.8);
            margin: 5px;
            overflow: auto;
            font-size: 16px;
            border-radius: 4px;
            white-space: pre-wrap; /* For terminal output */
        }

        /* ç‰¹å®šçª—å£æ ·å¼ */
        #about-window .window-body { font-family: var(--font-cjk); }
        .player-stats dt { color: var(--primary-glow); float: left; width: 120px; }
        .player-stats dd { margin-left: 130px; margin-bottom: 1em; }
        
        #terminal-window .window-body { background-color: #000; color: var(--success-green); font-family: var(--font-pixel); }
        .terminal-prompt { color: var(--primary-glow); }
        .terminal-prompt::before { content: '> '; }
        
        /* â˜… ä¿®å¤: æ·»åŠ  vertical-align: middle; ä»¥å¯¹é½å…‰æ ‡ */
        .cursor { 
            display: inline-block; 
            background: var(--success-green); 
            width: 0.5em; 
            height: 1em; 
            animation: blink 1s step-end infinite; 
            margin-left: 2px;
            vertical-align: middle;
        }
        
        #skills-window .skill-tree { list-style: none; padding-left: 20px; }
        #skills-window .skill-tree li { position: relative; padding: 5px 0 5px 25px; }
        #skills-window .skill-tree li::before { content: ''; position: absolute; left: 0; top: 15px; border-left: 2px dotted var(--primary-glow); height: 100%; }
        #skills-window .skill-tree li:last-child::before { height: 0; }
        #skills-window .skill-tree li::after { content: ''; position: absolute; left: 0; top: 15px; border-top: 2px dotted var(--primary-glow); width: 20px; }
        #skills-window .skill-tree strong { color: var(--secondary-glow); }

        #clock-widget { font-size: 28px; text-align: center; padding: 20px 10px; color: var(--primary-glow); text-shadow: 0 0 10px var(--primary-glow); }

        /* --- Dockæ  --- */
        .dock {
            position: fixed; bottom: 20px; left: 50%;
            transform: translateX(-50%);
            background: rgba(33, 33, 48, 0.8);
            border: 2px solid var(--window-border);
            backdrop-filter: blur(5px);
            padding: 10px; display: flex;
            gap: 15px; z-index: 200;
            border-radius: 12px;
            box-shadow: 0 0 20px var(--shadow-color);
        }
        .nav-button {
            width: 48px; height: 48px; font-size: 24px;
            display: flex; align-items: center; justify-content: center;
            background-color: var(--window-bg); border: 1px solid var(--window-border);
            color: var(--primary-glow);
            cursor: pointer; transition: all 0.2s ease;
            border-radius: 8px;
        }
        .nav-button:hover {
            transform: scale(1.1) translateY(-3px);
            background: var(--primary-glow);
            color: var(--text-color-dark);
            box-shadow: 0 0 10px var(--primary-glow);
        }

        /* --- å“åº”å¼è®¾è®¡ --- */
        @media (max-width: 768px) {
            body { font-size: 14px; }
            #desktop { grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); gap: 15px; padding: 15px; }
            .window {
                left: 5% !important; top: 10% !important;
                width: 90% !important; height: 80% !important;
                resize: none;
            }
            .dock { bottom: 10px; }
        }
    </style>
</head>
<body>
    <div id="crt-overlay"></div>
    <div class="stars"></div>

    <div id="boot-screen">
        <p>ShimmerOS v0.2.0</p>
        <p id="boot-line-1"></p>
        <p id="boot-line-2"></p>
        <p id="boot-line-3"></p>
    </div>

    <div id="desktop">
        <div class="desktop-icon" data-window-id="blog-window">
            <div class="icon-image">ğŸ“</div>
            <span class="icon-label">å¾®å…‰åšå®¢</span>
        </div>
        <div class="desktop-icon" data-window-id="notes-window">
            <div class="icon-image">ğŸ“š</div>
            <span class="icon-label">è¯¾ä¸šç¬”è®°</span>
        </div>
        <div class="desktop-icon" data-window-id="skills-window">
            <div class="icon-image">ğŸŒ±</div>
            <span class="icon-label">æŠ€èƒ½æ ‘</span>
        </div>
        <div class="desktop-icon" data-window-id="about-window">
            <div class="icon-image">ğŸ§‘â€ğŸš€</div>
            <span class="icon-label">å…³äºæˆ‘</span>
        </div>
         <div class="desktop-icon" data-window-id="clock-window">
            <div class="icon-image">â±ï¸</div>
            <span class="icon-label">æ—¶é’Ÿ</span>
        </div>
    </div>

    <div id="about-window" class="window" style="top: 15%; left: 30%;">
        <div class="title-bar"><span>PLAYER_PROFILE.DAT</span><div class="title-bar-controls"><div class="control-button close-btn">X</div></div></div>
        <div class="window-body">
            <dl class="player-stats">
                <dt>ã€èº«ä»½ã€‘</dt><dd>æ•°æ®åˆ†æå¸ˆ (æ–°äºº)</dd>
                <dt>ã€ä¸“é•¿ã€‘</dt><dd>Python, SQL, BIå·¥å…·</dd>
                <dt>ã€èƒ½åŠ›ã€‘</dt><dd>ä¸šåŠ¡æ´å¯ŸåŠ›ã€é€»è¾‘æ€è¾¨ã€å¿«é€Ÿå­¦ä¹ </dd>
                <dt>ã€ç‰¹è´¨ã€‘</dt><dd>å°†å¤æ‚ä¸šåŠ¡é—®é¢˜è½¬åŒ–ä¸ºå¯æ‰§è¡Œçš„æ•°æ®åˆ†ææ–¹æ¡ˆã€‚</dd>
                <dt>ã€æˆå°±ã€‘</dt><dd>åœ¨å¤šé¡¹æ•°å­¦å»ºæ¨¡ä¸å•†ä¸šåˆ†æç«èµ›ä¸­å–å¾—ä¼˜è‰¯æˆ˜ç»©ã€‚</dd>
                <dt>ã€ä¿¡æ¡ã€‘</dt><dd>æ¸´æœ›åœ¨çœŸå®åœºæ™¯ä¸­æŒ‘æˆ˜è‡ªæˆ‘ï¼Œç”¨æ•°æ®ä¸ºå†³ç­–åˆ›é€ ä»·å€¼ã€‚</dd>
            </dl>
        </div>
    </div>

    <div id="skills-window" class="window" style="top: 25%; left: 10%;">
        <div class="title-bar"><span>SKILL_TREE.SYS</span><div class="title-bar-controls"><div class="control-button close-btn">X</div></div></div>
        <div class="window-body">
            <ul class="skill-tree">
                <li><strong>æ•°æ®åˆ†æ & å¯è§†åŒ–</strong>
                    <ul class="skill-tree"><li>Python (Pandas, NumPy)</li><li>SQL (MySQL, PostgreSQL)</li><li>BI Tools (Tableau, Power BI)</li></ul>
                </li>
                <li><strong>ç¼–ç¨‹ & å¼€å‘</strong>
                    <ul class="skill-tree"><li>Web (HTML, CSS, JS)</li><li>åç«¯ (Flask)</li></ul>
                </li>
                <li><strong>æ•°å­¦ & å»ºæ¨¡</strong>
                    <ul class="skill-tree"><li>ç»Ÿè®¡å­¦</li><li>æœºå™¨å­¦ä¹  (Scikit-learn)</li></ul>
                </li>
            </ul>
        </div>
    </div>

    <div id="terminal-window" class="window" style="top: 40%; left: 40%; width: 500px; height: 350px;">
        <div class="title-bar"><span>ShimmerCMD</span><div class="title-bar-controls"><div class="control-button close-btn">X</div></div></div>
        <div class="window-body" id="terminal-body" tabindex="0">
            <div id="terminal-output"></div>
            <div id="terminal-input-line">
                <span class="terminal-prompt"></span>
                <span id="terminal-input"></span>
                <span class="cursor"></span>
            </div>
        </div>
    </div>

    <div id="clock-window" class="window" style="top: 5%; left: 75%;">
        <div class="title-bar"><span>Time</span><div class="title-bar-controls"><div class="control-button close-btn">X</div></div></div>
        <div class="window-body"><div id="clock-widget">--:--:--</div></div>
    </div>

    <div id="blog-window" class="window" style="top: 15%; left: 20%; width: 60%; height: 70%;">
        <div class="title-bar"><span>å¾®å…‰åšå®¢ (Blog)</span><div class="title-bar-controls"><div class="control-button close-btn">X</div></div></div>
        <div class="window-body" style="padding:0; overflow:hidden;"><iframe src="blog/blognav.html" style="width:100%; height:100%; border:0;"></iframe></div>
    </div>
    <div id="notes-window" class="window" style="top: 20%; left: 25%; width: 60%; height: 70%;">
        <div class="title-bar"><span>è¯¾ä¸šç¬”è®° (Notes)</span><div class="title-bar-controls"><div class="control-button close-btn">X</div></div></div>
        <div class="window-body" style="padding:0; overflow:hidden;"><iframe src="note/notenav.html" style="width:100%; height:100%; border:0;"></iframe></div>
    </div>
    
    <div class="dock">
        <div class="nav-button" title="ç»ˆç«¯" data-window-id="terminal-window">ğŸ“Ÿ</div>
        <div class="nav-button" title="è¿”å›" onclick="window.history.back()">â†</div>
        <div class="nav-button" title="ä¸»é¡µ" onclick="window.location.reload()">âŒ‚</div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    
    // --- æ‰“å­—æœºæ•ˆæœå‡½æ•° ---
    function typeWriter(element, text, speed, callback) {
        let i = 0;
        element.innerHTML = "";
        function type() {
            if (i < text.length) {
                element.innerHTML += text.charAt(i);
                i++;
                setTimeout(type, speed);
            } else if (callback) {
                callback();
            }
        }
        type();
    }

    // --- å¼€æœºåŠ¨ç”» ---
    const bootScreen = document.getElementById('boot-screen');
    const desktop = document.getElementById('desktop');
    setTimeout(() => typeWriter(document.getElementById('boot-line-1'), "Initializing system...", 50, () => {
        setTimeout(() => typeWriter(document.getElementById('boot-line-2'), "Loading interactive shell...", 50, () => {
            setTimeout(() => typeWriter(document.getElementById('boot-line-3'), "Welcome, user. System ready.", 50, () => {
                setTimeout(() => {
                    bootScreen.classList.add('hidden');
                    desktop.classList.add('loaded');
                }, 1000);
            }), 500);
        }), 500);
    }), 500);

    // --- çª—å£ç®¡ç† ---
    const windows = document.querySelectorAll('.window');
    let activeWindow = null;
    let maxZIndex = 100;

    function activateWindow(win) {
        if (activeWindow === win) return;
        if (activeWindow) activeWindow.classList.remove('active');
        
        maxZIndex++;
        win.style.zIndex = maxZIndex;
        win.classList.add('active');
        activeWindow = win;

        // å¦‚æœæ˜¯ç»ˆç«¯çª—å£ï¼Œä½¿å…¶è·å¾—ç„¦ç‚¹
        if (win.id === 'terminal-window') {
            win.querySelector('#terminal-body').focus();
        }
    }

    function openOrActivateWindow(windowId) {
        const win = document.getElementById(windowId);
        if (win) {
            if (win.style.display !== 'flex') {
                win.style.display = 'flex';
                if (windowId === 'terminal-window') {
                    const output = win.querySelector('#terminal-output');
                    output.innerHTML = 'ShimmerOS [Version 0.2.0]\n(c) 2025 Shimmer Corp.\nType "help" for a list of commands.\n';
                }
            }
            activateWindow(win);
        }
    }

    windows.forEach(win => {
        const titleBar = win.querySelector('.title-bar');
        win.addEventListener('mousedown', () => activateWindow(win));
        if (titleBar) {
            titleBar.addEventListener('mousedown', (e) => {
                if (e.target.closest('.control-button')) return;
                e.preventDefault();
                activateWindow(win);
                let startX = e.clientX, startY = e.clientY;
                let startLeft = win.offsetLeft, startTop = win.offsetTop;
                function onMouseMove(e) {
                    win.style.left = `${startLeft + e.clientX - startX}px`;
                    win.style.top = `${startTop + e.clientY - startY}px`;
                }
                function onMouseUp() {
                    document.removeEventListener('mousemove', onMouseMove);
                    document.removeEventListener('mouseup', onMouseUp);
                }
                document.addEventListener('mousemove', onMouseMove);
                document.addEventListener('mouseup', onMouseUp);
            });
        }
        const closeBtn = win.querySelector('.close-btn');
        if (closeBtn) {
            closeBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                win.style.display = 'none';
            });
        }
    });

    // --- äº‹ä»¶ç»‘å®š ---
    // æ¡Œé¢å›¾æ ‡: åŒå‡»æ‰“å¼€
    document.querySelectorAll('.desktop-icon').forEach(icon => {
        icon.addEventListener('dblclick', () => {
            openOrActivateWindow(icon.getAttribute('data-window-id'));
        });
    });

    // å¯¼èˆªæ æŒ‰é’®: å•å‡»æ‰“å¼€
    document.querySelectorAll('.nav-button[data-window-id]').forEach(button => {
        button.addEventListener('click', () => {
            openOrActivateWindow(button.getAttribute('data-window-id'));
        });
    });

    // --- å¯äº¤äº’ç»ˆç«¯ ---
    const terminalWindow = document.getElementById('terminal-window');
    const terminalBody = document.getElementById('terminal-body');
    const terminalOutput = document.getElementById('terminal-output');
    const terminalInput = document.getElementById('terminal-input');

    const commands = {
        help: () => `Available commands:\n  help      - Shows this help message\n  ls        - Lists all desktop apps\n  open <app>  - Opens an application (e.g., open blog)\n  date      - Displays the current date and time\n  about     - Shows the player profile\n  clear     - Clears the terminal screen\n  reboot    - Reboots the system`,
        ls: () => {
            const icons = [...document.querySelectorAll('.desktop-icon .icon-label')];
            return 'Desktop items:\n' + icons.map(icon => `  - ${icon.textContent}`).join('\n');
        },
        open: (args) => {
            const appName = args[0];
            if (!appName) return 'Usage: open <app_name>';
            const icon = [...document.querySelectorAll('.desktop-icon')].find(i => 
                i.querySelector('.icon-label').textContent.toLowerCase().includes(appName.toLowerCase())
            );
            if (icon) {
                openOrActivateWindow(icon.dataset.windowId);
                return `Opening ${appName}...`;
            }
            return `Error: Application "${appName}" not found.`;
        },
        date: () => new Date().toLocaleString(),
        about: () => document.querySelector('#about-window .window-body').textContent.trim(),
        clear: () => { terminalOutput.innerHTML = ''; return ''; },
        reboot: () => { window.location.reload(); return 'Rebooting system...'; }
    };

    terminalWindow.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
            e.preventDefault();
            const fullCommand = terminalInput.textContent;
            const [command, ...args] = fullCommand.trim().split(' ').filter(Boolean);
            
            // Append command to output
            terminalOutput.innerHTML += `\n<span class="terminal-prompt"></span>${fullCommand}`;
            
            // Process command
            if (command) {
                const response = commands[command] ? commands[command](args) : `Command not found: ${command}`;
                if(response) terminalOutput.innerHTML += `\n${response}`;
            }

            // Reset input
            terminalInput.textContent = '';
            terminalBody.scrollTop = terminalBody.scrollHeight;

        } else if (e.key === 'Backspace') {
            terminalInput.textContent = terminalInput.textContent.slice(0, -1);
        } else if (e.key.length === 1 && !e.ctrlKey && !e.metaKey) {
            terminalInput.textContent += e.key;
        }
    });
    
    // --- æ—¶é’Ÿå°å·¥å…· ---
    const clockElement = document.getElementById('clock-widget');
    function updateClock() {
        const now = new Date();
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        const seconds = String(now.getSeconds()).padStart(2, '0');
        clockElement.textContent = `${hours}:${minutes}:${seconds}`;
    }
    setInterval(updateClock, 1000);
    updateClock();
});
</script>

</body>
</html>
